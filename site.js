function toggle(t){var e=document.getElementById(t);return e?(e.style.display="none"==e.style.display?"block":"none",!0):!0}function whichTransitionEvent(){var t,e=document.createElement("fakeelement"),i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(t in i)if(void 0!==e.style[t])return i[t]}jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(t,e,i,n,a){return jQuery.easing[jQuery.easing.def](t,e,i,n,a)},easeInQuad:function(t,e,i,n,a){return n*(e/=a)*e+i},easeOutQuad:function(t,e,i,n,a){return-n*(e/=a)*(e-2)+i},easeInOutQuad:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e+i:-n/2*(--e*(e-2)-1)+i},easeInCubic:function(t,e,i,n,a){return n*(e/=a)*e*e+i},easeOutCubic:function(t,e,i,n,a){return n*((e=e/a-1)*e*e+1)+i},easeInOutCubic:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e+i:n/2*((e-=2)*e*e+2)+i},easeInQuart:function(t,e,i,n,a){return n*(e/=a)*e*e*e+i},easeOutQuart:function(t,e,i,n,a){return-n*((e=e/a-1)*e*e*e-1)+i},easeInOutQuart:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e*e+i:-n/2*((e-=2)*e*e*e-2)+i},easeInQuint:function(t,e,i,n,a){return n*(e/=a)*e*e*e*e+i},easeOutQuint:function(t,e,i,n,a){return n*((e=e/a-1)*e*e*e*e+1)+i},easeInOutQuint:function(t,e,i,n,a){return(e/=a/2)<1?n/2*e*e*e*e*e+i:n/2*((e-=2)*e*e*e*e+2)+i},easeInSine:function(t,e,i,n,a){return-n*Math.cos(e/a*(Math.PI/2))+n+i},easeOutSine:function(t,e,i,n,a){return n*Math.sin(e/a*(Math.PI/2))+i},easeInOutSine:function(t,e,i,n,a){return-n/2*(Math.cos(Math.PI*e/a)-1)+i},easeInExpo:function(t,e,i,n,a){return 0==e?i:n*Math.pow(2,10*(e/a-1))+i},easeOutExpo:function(t,e,i,n,a){return e==a?i+n:n*(-Math.pow(2,-10*e/a)+1)+i},easeInOutExpo:function(t,e,i,n,a){return 0==e?i:e==a?i+n:(e/=a/2)<1?n/2*Math.pow(2,10*(e-1))+i:n/2*(-Math.pow(2,-10*--e)+2)+i},easeInCirc:function(t,e,i,n,a){return-n*(Math.sqrt(1-(e/=a)*e)-1)+i},easeOutCirc:function(t,e,i,n,a){return n*Math.sqrt(1-(e=e/a-1)*e)+i},easeInOutCirc:function(t,e,i,n,a){return(e/=a/2)<1?-n/2*(Math.sqrt(1-e*e)-1)+i:n/2*(Math.sqrt(1-(e-=2)*e)+1)+i},easeInElastic:function(t,e,i,n,a){var o=1.70158,r=0,s=n;if(0==e)return i;if(1==(e/=a))return i+n;if(r||(r=.3*a),s<Math.abs(n)){s=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/s);return-(s*Math.pow(2,10*(e-=1))*Math.sin(2*(e*a-o)*Math.PI/r))+i},easeOutElastic:function(t,e,i,n,a){var o=1.70158,r=0,s=n;if(0==e)return i;if(1==(e/=a))return i+n;if(r||(r=.3*a),s<Math.abs(n)){s=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/s);return s*Math.pow(2,-10*e)*Math.sin(2*(e*a-o)*Math.PI/r)+n+i},easeInOutElastic:function(t,e,i,n,a){var o=1.70158,r=0,s=n;if(0==e)return i;if(2==(e/=a/2))return i+n;if(r||(r=.3*a*1.5),s<Math.abs(n)){s=n;var o=r/4}else var o=r/(2*Math.PI)*Math.asin(n/s);return 1>e?-.5*s*Math.pow(2,10*(e-=1))*Math.sin(2*(e*a-o)*Math.PI/r)+i:s*Math.pow(2,-10*(e-=1))*Math.sin(2*(e*a-o)*Math.PI/r)*.5+n+i},easeInBack:function(t,e,i,n,a,o){return void 0==o&&(o=1.70158),n*(e/=a)*e*((o+1)*e-o)+i},easeOutBack:function(t,e,i,n,a,o){return void 0==o&&(o=1.70158),n*((e=e/a-1)*e*((o+1)*e+o)+1)+i},easeInOutBack:function(t,e,i,n,a,o){return void 0==o&&(o=1.70158),(e/=a/2)<1?n/2*e*e*(((o*=1.525)+1)*e-o)+i:n/2*((e-=2)*e*(((o*=1.525)+1)*e+o)+2)+i},easeInBounce:function(t,e,i,n,a){return n-jQuery.easing.easeOutBounce(t,a-e,0,n,a)+i},easeOutBounce:function(t,e,i,n,a){return(e/=a)<1/2.75?7.5625*n*e*e+i:2/2.75>e?n*(7.5625*(e-=1.5/2.75)*e+.75)+i:2.5/2.75>e?n*(7.5625*(e-=2.25/2.75)*e+.9375)+i:n*(7.5625*(e-=2.625/2.75)*e+.984375)+i},easeInOutBounce:function(t,e,i,n,a){return a/2>e?.5*jQuery.easing.easeInBounce(t,2*e,0,n,a)+i:.5*jQuery.easing.easeOutBounce(t,2*e-a,0,n,a)+.5*n+i}}),function(t,e){var i=function(t,e,i){var n;return function(){function a(){i||t.apply(o,r),n=null}var o=this,r=arguments;n?clearTimeout(n):i&&t.apply(o,r),n=setTimeout(a,e||100)}};jQuery.fn[e]=function(t){return t?this.bind("resize",i(t)):this.trigger(e)}}(jQuery,"smartresize");var customTransitionEnd=whichTransitionEvent();!function(t){var e=0;t.fn.fluidbox=function(i){var n=t.extend(!0,{viewportFill:.95,debounceResize:!0,stackIndex:1e3,stackIndexDelta:10,closeTrigger:[{selector:".fluidbox-overlay",event:"click"},{selector:"document",event:"keyup",keyCode:27}],immediateOpen:!1},i),a=["keyup","keydown","keypress"];n.stackIndex<n.stackIndexDelta&&(n.stackIndexDelta=n.stackIndex),$fbOverlay=t("<div />",{"class":"fluidbox-overlay",css:{"z-index":n.stackIndex}});var o,r=this,s=t(window),d=function(e){t(e+".fluidbox-opened").trigger("click")},u=function(e,i){var a=e.find("img"),r=e.find(".fluidbox-ghost"),d=e.find(".fluidbox-wrap"),u=e.data(),c=0,l=0;a.data().imgRatio=u.natWidth/u.natHeight;var f,h,g;o>a.data().imgRatio?(c=u.natHeight<s.height()*n.viewportFill?u.natHeight:s.height()*n.viewportFill,u.imgScale=c/a.height(),u.imgScaleY=u.imgScale,f=a.height()*u.imgScaleY,h=f/u.natHeight,g=u.natWidth*h/a.width(),u.imgScaleX=g):(l=u.natWidth<s.width()*n.viewportFill?u.natWidth:s.width()*n.viewportFill,u.imgScale=l/a.width(),u.imgScaleX=u.imgScale,newWidth=a.width()*u.imgScaleX,h=newWidth/u.natWidth,g=u.natHeight*h/a.height(),u.imgScaleY=g);var p=s.scrollTop()-a.offset().top+.5*a.data("imgHeight")*(a.data("imgScale")-1)+.5*(s.height()-a.data("imgHeight")*a.data("imgScale")),m=.5*a.data("imgWidth")*(a.data("imgScale")-1)+.5*(s.width()-a.data("imgWidth")*a.data("imgScale"))-a.offset().left,x=parseInt(1e3*u.imgScaleX)/1e3+","+parseInt(1e3*u.imgScaleY)/1e3;r.css({transform:"translate("+parseInt(10*m)/10+"px,"+parseInt(10*p)/10+"px) scale("+x+")",top:a.offset().top-d.offset().top,left:a.offset().left-d.offset().left}).one(customTransitionEnd,function(){t.each(i,function(t,i){e.trigger(i)})})},c=function(t){function e(){d.imgWidth=i.width(),d.imgHeight=i.height(),d.imgRatio=i.width()/i.height(),a.css({width:i.width(),height:i.height(),top:i.offset().top-r.offset().top+parseInt(i.css("borderTopWidth"))+parseInt(i.css("paddingTop")),left:i.offset().left-r.offset().left+parseInt(i.css("borderLeftWidth"))+parseInt(i.css("paddingLeft"))}),d.imgScale=o>d.imgRatio?s.height()*n.viewportFill/i.height():s.width()*n.viewportFill/i.width()}if(o=s.width()/s.height(),t.hasClass("fluidbox")){var i=t.find("img"),a=t.find(".fluidbox-ghost"),r=t.find(".fluidbox-wrap"),d=i.data();e(),i.load(e)}},l=function(e){if(t(this).hasClass("fluidbox")){var i=t(this),a=t(this).find("img"),o=t(this).find(".fluidbox-ghost"),r=t(this).find(".fluidbox-wrap"),s={},d=function(){i.trigger("openstart"),i.append($fbOverlay).data("fluidbox-state",1).removeClass("fluidbox-closed").addClass("fluidbox-opened"),s.close&&window.clearTimeout(s.close),s.open=window.setTimeout(function(){t(".fluidbox-overlay").css({opacity:1})},10),t(".fluidbox-wrap").css({zIndex:n.stackIndex-n.stackIndexDelta-1}),r.css({"z-index":n.stackIndex+n.stackIndexDelta})},c=function(){i.trigger("closestart"),i.data("fluidbox-state",0).removeClass("fluidbox-opened fluidbox-loaded fluidbox-loading").addClass("fluidbox-closed"),s.open&&window.clearTimeout(s.open),s.close=window.setTimeout(function(){t(".fluidbox-overlay").remove(),r.css({"z-index":n.stackIndex-n.stackIndexDelta})},10),t(".fluidbox-overlay").css({opacity:0}),o.css({transform:"translate(0,0) scale(1)",opacity:0,top:a.offset().top-r.offset().top+parseInt(a.css("borderTopWidth"))+parseInt(a.css("paddingTop")),left:a.offset().left-r.offset().left+parseInt(a.css("borderLeftWidth"))+parseInt(a.css("paddingLeft"))}).one(customTransitionEnd,function(){i.trigger("closeend")}),a.css({opacity:1})};0!==t(this).data("fluidbox-state")&&t(this).data("fluidbox-state")?c():(i.addClass("fluidbox-loading"),a.css({opacity:0}),o.css({"background-image":"url("+a.attr("src")+")",opacity:1}),n.immediateOpen?(i.data("natWidth",a[0].naturalWidth).data("natHeight",a[0].naturalHeight),d(),u(i,["openend"]),t("<img />",{src:i.attr("href")}).load(function(){i.trigger("imageloaddone").trigger("delayedloaddone").removeClass("fluidbox-loading").addClass("fluidbox-loaded").data("natWidth",t(this)[0].naturalWidth).data("natHeight",t(this)[0].naturalHeight),o.css({"background-image":"url("+i.attr("href")+")"}),u(i,["delayedreposdone"])}).error(function(){i.trigger("imageloadfail"),c()})):t("<img />",{src:i.attr("href")}).load(function(){i.trigger("imageloaddone").removeClass("fluidbox-loading").addClass("fluidbox-loaded").data("natWidth",t(this)[0].naturalWidth).data("natHeight",t(this)[0].naturalHeight),o.css({"background-image":"url("+i.attr("href")+")"}),d(),u(i,["openend"])}).error(function(){i.trigger("imageloadfail"),c()})),e.preventDefault()}},f=function(e){e?c(e):r.each(function(){c(t(this))});var i=t("a.fluidbox.fluidbox-opened");i.length>0&&u(i,["resizeend"])};return n.debounceResize?t(window).smartresize(function(){f()}):t(window).resize(function(){f()}),r.each(function(){if(t(this).is("a")&&1===t(this).children().length&&t(this).children().is("img")&&"none"!==t(this).css("display")&&"none"!==t(this).parents().css("display")){var i=t("<div />",{"class":"fluidbox-wrap",css:{"z-index":n.stackIndex-n.stackIndexDelta}});e+=1;var o=t(this);o.addClass("fluidbox fluidbox-closed").attr("id","fluidbox-"+e).wrapInner(i).find("img").css({opacity:1}).after('<div class="fluidbox-ghost" />').each(function(){var e=t(this);e.width()>0&&e.height()>0?(c(o),o.click(l)):e.load(function(){c(o),o.click(l),o.trigger("thumbloaddone")}).error(function(){o.trigger("thumbloadfail")})}),t(this).on("recompute",function(){f(t(this)),t(this).trigger("recomputeend")});var r="#fluidbox-"+e;n.closeTrigger&&t.each(n.closeTrigger,function(e){var i=n.closeTrigger[e];"window"!=i.selector?"document"==i.selector&&(i.keyCode&&a.indexOf(i.event)>-1?t(document).on(i.event,function(t){t.keyCode==i.keyCode&&d(r)}):t(document).on(i.event,r,function(){d(r)})):s.on(i.event,function(){d(r)})})}}),r}}(jQuery);